## 高可用架构

资源隔离、限流、熔断、降级、运维监控 

- 资源隔离：让某一刻东西在故障的情况下，不会耗尽系统所有资源，如线程资源

  一个真实的遭遇，线上某块代码 bug，导致大量线程死循环，又创建大量线程， 最后系统资源被耗尽。崩溃

  资源隔离的话，比如限制只能使用 10 个线程，那么这一块出问题，也不会影响整个系统

- 限流

  高并发流量涌入，比如突然间一秒钟 100 万 QPS，系统完全承受不住，直接崩溃。 限流可以只对 10 万 QPS 进行服务，其他的都拒绝。这种情况下就是在你双 11 抢东西付款 的时候，老是告诉你系统繁忙的情况，但是偶尔又可以刷出来

- 熔断：连续故障，则在一段时间内直接拒绝服务

  我自己最近遇到的就是 zuul 中的路由转发，当某一个服务连续转发失败（如那个服务根本没有启动）， 则在一分钟内直接返回异常信息，而不是继续转发，继续等待异常

- 降级：

  如 mysql 挂了，系统发现了，自动降级，从内存里存的少量数据中，去提取一些数据出来。 疑问：这样的数据在什么场景下使用使用呢？

- 运维监控：

  监控 + 报警 + 优化，各种异常的情况，有问题就及时报警，然后对症下药