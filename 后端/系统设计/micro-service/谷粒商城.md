整个微服务架构的流程

```r
1. 首先从手机、电脑等客户端发送请求到nginx集群
2. nginx将所有的请求转交给api网关，SpringCloud Gateway组件
3. 网关根据请求动态路由到指定服务（检索、商品、订单等）
	1. 如果某项服务过多，网关还会负载均衡Ribbon来调用该服务
	2. 如果某项服务出现问题，网关还会对服务做统一的熔断、降级SpringCloud Alibaba Sentinel组件
		1. 令牌限流，比如此时有100万个请求进来，如果没有限流，有可能把整个后台服务压垮，我们可以只放行1万个过去，让业务集群轻松处理完这些请求。
	3. 认证授权，看请求是否合法，合法了才放行
4. 请求最终来到了服务，使用了Springboot来编写的微服务。
5. 服务之间有可能会互相调用（订单调用商品，商品调用库存），使用的是SpringCloud Feign组件
6. 有些请求可能要登陆之后才能处理，所以需要一个OAuth2.0的认证中心，除了一般登陆，还有基于OAuth2.0的社交登陆（微博，微信）
7. 整个应用的安全权限控制使用SpringSecurity
8. 数据存储
    1. 缓存使用的Redis集群（哨兵集群+分片集群）
    2. 持久化存储数据使用的MySQL集群，读写分离、分库分表。
    3. 服务和服务之间使用`消息队列Rabbit集群`实现异步解耦、完成分布式事务的最终一致性。
    4. 有些服务有全文检索，比如检索商品信息，使用ElasticSearch
    5. 有些服务在运行期间要存储图片、视频等，使用阿里云的对象存储服务OSS
9. 为了快速定位项目中出现的问题，使用ELK进行相关的日志处理，使用LogStash收集业务的各种日志，把日志存储到ElasticSearch中，再使用Kibana可视化界面检索词相关的日志信息，帮我们快速定位，呈现问题所在。
10.在分布式系统中，每一个服务都可能部署在不同的机器，而且服务和服务之间要互相调用，就得知道彼此都在哪里，因此将所有的服务都注册到注册中心SpringCloud Alibaba nacos，然后别的服务可以到注册中心中去发现其他服务所在的位置。
11.同时，每一个服务的配置众多，因此要集中管理配置，实现改一处配置这些服务都能够自动修改掉。使用SpringCloud Alibaba nacos作为配置中心。
12.服务之间的调用可能会出现问题，比如订单服务调用商品服务，商品服务调用库存服务，某一个链路出现了问题，需要追踪调用链看哪里出现了问题，使用SpringCloud Sleuth + Zinkin，把每个服务的信息交给Prometheus进行聚合分析，再由Grafana进行可视化展示。通过Prometheus提供的Altermanager实时得到一些服务的告警信息，把这些告警信息以邮件或短信的方式通知开发或运维人员
```



